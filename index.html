<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Load Plotly Div</title>
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js" charset="utf-8"></script>
</head>
<body>

    <h1>My Dashboard</h1>
    <div id="target-placeholder">Loading plot...</div>

    <script>
        async function loadPlot() {
            try {
                const response = await fetch('plot_source.html');
                const htmlString = await response.text();

                const parser = new DOMParser();
                const doc = parser.parseFromString(htmlString, 'text/html');

                // IMPROVED: Look for the specific ID, but fallback to the first DIV 
                // if you didn't wrap the source file in a specific container.
                const plotDiv = doc.getElementById('plotly-graph-container') || doc.querySelector('div');

                if (!plotDiv) {
                    throw new Error("Could not find a div in the source file.");
                }

                const target = document.getElementById('target-placeholder');
                target.innerHTML = plotDiv.innerHTML;

                // Re-execute scripts to trigger the plot rendering
                const scripts = target.querySelectorAll("script");
                scripts.forEach(oldScript => {
                    const newScript = document.createElement("script");
                    newScript.text = oldScript.text;
                    oldScript.parentNode.replaceChild(newScript, oldScript);
                });

            } catch (err) {
                console.error('Error loading the plot:', err);
                document.getElementById('target-placeholder').innerText = "Error: " + err.message;
            }
        }

        loadPlot();
    </script>
</body>
</html>